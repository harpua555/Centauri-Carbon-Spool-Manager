# Add Spool Helper Configuration
# This creates input helpers and a script for a form-based "Add Spool" experience
# Add this to your configuration.yaml or create separate files in packages/

# Input helpers for spool configuration
input_number:
  new_spool_slot:
    name: "Target Spool Slot"
    min: 1
    max: 4
    step: 1
    mode: slider
    icon: mdi:numeric

  new_spool_weight:
    name: "Spool Weight (grams)"
    min: 100
    max: 5000
    step: 50
    mode: box
    unit_of_measurement: "g"
    icon: mdi:weight-gram

input_text:
  new_spool_name:
    name: "Spool Name"
    initial: ""
    max: 50
    icon: mdi:label

input_select:
  new_spool_material:
    name: "Material Type"
    options:
      - PLA
      - ABS
      - PETG
      - TPU
      - Nylon
      - ASA
    icon: mdi:palette

input_boolean:
  new_spool_auto_lock:
    name: "Auto-lock after setup"
    initial: true
    icon: mdi:lock

# Script that calls the setup_spool service
script:
  add_new_spool:
    alias: "Add New Spool"
    icon: mdi:plus-circle
    sequence:
      - service: centauri_spool_manager.setup_spool
        data:
          spool_number: "{{ states('input_number.new_spool_slot') | int }}"
          name: "{{ states('input_text.new_spool_name') }}"
          material: "{{ states('input_select.new_spool_material') }}"
          weight_grams: "{{ states('input_number.new_spool_weight') | float }}"
          auto_lock: "{{ is_state('input_boolean.new_spool_auto_lock', 'on') }}"
      - service: input_text.set_value
        target:
          entity_id: input_text.new_spool_name
        data:
          value: ""
      - service: persistent_notification.create
        data:
          title: "Spool Added"
          message: "{{ states('input_text.new_spool_name') }} added to Spool {{ states('input_number.new_spool_slot') }}"
